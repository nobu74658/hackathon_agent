# Sales Growth AI Agent - プロンプト一覧

このドキュメントは、Sales Growth AI Agentシステムで使用されているすべてのLLMプロンプトをまとめたものです。

## 概要

システム全体で使用されるプロンプトは以下の4つのファイルに分散して管理されています：

1. `backend/app/services/real_llm_service.py` - 本格的なLLMサービス用プロンプト
2. `backend/app/services/dialogue_manager.py` - 対話管理用プロンプト
3. `backend/app/services/conversation_memory.py` - 会話記憶管理用プロンプト
4. `backend/app/services/mock_llm.py` - テスト用モックレスポンス

## ファイル別プロンプト詳細

### 1. backend/app/services/real_llm_service.py

#### 1.1 初期質問生成プロンプト (lines 84-95)
**目的**: AIセールスコーチとしての初期質問を生成

```python
system_prompt = """あなたは経験豊富なセールスコーチです。
新人営業担当者のスキル向上をサポートするために、効果的な質問を通じて現状を把握し、
個別のアクションプランを作成することが目標です。

以下の手順で進めてください：
1. まず営業担当者の現在の状況や課題について質問する
2. 具体的な事例や経験について深く掘り下げる
3. 改善したい分野や目標について確認する

最初の質問を1つ生成してください。親しみやすく、答えやすい質問にしてください。"""
```

#### 1.2 フォローアップ質問生成プロンプト (lines 139-147)
**目的**: 会話履歴に基づいたフォローアップ質問を生成

```python
prompt = f"""これまでの会話を踏まえて、次に聞くべき質問を1つ生成してください。

会話履歴:
{conversation_history}

より具体的な情報を得るため、または新しい角度から課題を探るための質問を作成してください。
質問は自然で会話的なトーンにしてください。"""
```

#### 1.3 情報充足度評価プロンプト (lines 188-199)
**目的**: 情報の十分性を0-100のスケールで評価

```python
evaluation_prompt = f"""以下の会話内容から、営業担当者のアクションプラン作成に必要な情報の充足度を0-100のスケールで評価してください。

会話内容:
{conversation_history}

評価基準:
- 現在の課題や問題点が明確か (20点)
- 具体的な事例や状況が提供されているか (20点)
- 目標や改善したい分野が特定されているか (20点)
- 営業プロセスの詳細が把握できているか (20点)
- 実行可能性を判断できる情報があるか (20点)

数値のみで回答してください（例: 75）"""
```

#### 1.4 アクションプラン生成プロンプト (lines 223-245)
**目的**: 包括的なアクションプランをJSON形式で生成

```python
action_plan_prompt = f"""これまでの会話内容に基づいて、営業担当者向けの包括的なアクションプランを作成してください。

会話内容:
{conversation_history}

以下のJSON形式で、具体的で実行可能なアクションプランを作成してください：

{{
    "summary": "状況の要約",
    "main_challenges": ["主要な課題1", "主要な課題2", "..."],
    "action_items": [
        {{
            "title": "アクション項目のタイトル",
            "description": "詳細な説明",
            "steps": ["ステップ1", "ステップ2", "..."],
            "timeline": "実行期間",
            "success_metrics": ["成功指標1", "成功指標2"],
            "resources_needed": ["必要リソース1", "必要リソース2"]
        }}
    ],
    "follow_up_schedule": "フォローアップスケジュール"
}}

実践的で測定可能な目標を設定してください。"""
```

#### 1.5 トピック抽出プロンプト (lines 196-205)
**目的**: 会話から主要なトピックを抽出

```python
topic_prompt = f"""以下の会話内容から、主要なトピックを3-5個抽出してください。

会話内容:
{conversation_text}

以下のJSON形式で回答してください：
{{
    "topics": ["トピック1", "トピック2", "トピック3", "..."]
}}

営業スキルや課題に関連するトピックを優先してください。"""
```

### 2. backend/app/services/dialogue_manager.py

#### 2.1 初期対話プロンプト (lines 55-66)
**目的**: AIアシスタントとしての役割を定義

```python
initial_prompt = """あなたは経験豊富なセールスコーチです。
新人営業担当者の成長をサポートするAIアシスタントとして、以下の役割を果たしてください：

1. 営業担当者の現状や課題を理解するための効果的な質問をする
2. 具体的な改善点や成長機会を特定する
3. 実践的で実行可能なアドバイスを提供する
4. 親しみやすく、サポート的な態度を保つ

最初の挨拶と、現状を把握するための質問を1つしてください。"""
```

#### 2.2 完全性評価プロンプト (lines 138-149)
**目的**: 情報の完全性を評価

```python
completeness_prompt = f"""以下の会話履歴から、営業担当者の状況把握の完全性を評価してください。

会話履歴:
{conversation_history}

以下の5つの観点から評価してください：
1. 現在の課題・問題点の明確化
2. 具体的な事例・状況の把握
3. 目標・改善希望分野の特定
4. 営業プロセス・手法の理解
5. 実行環境・制約条件の把握

0-100のスコアで評価し、数値のみ回答してください。"""
```

#### 2.3 フォローアップ質問プロンプト (lines 165-173)
**目的**: 次の質問を生成

```python
followup_prompt = f"""これまでの会話を踏まえて、次に聞くべき質問を生成してください。

会話履歴:
{conversation_history}

より深い理解を得るため、または新しい側面を探るための質問を1つ作成してください。
自然で親しみやすい質問にしてください。"""
```

#### 2.4 アクションプラン生成プロンプト (lines 202-211)
**目的**: 具体的な成長プランを作成

```python
action_plan_prompt = f"""会話内容に基づいて、営業担当者向けの具体的な成長プランを作成してください。

会話履歴:
{conversation_history}

実行可能で測定可能な目標を含む、詳細なアクションプランを提供してください。
具体的なステップ、期限、成功指標を含めてください。"""
```

### 3. backend/app/services/conversation_memory.py

#### 3.1 トピック抽出プロンプト (lines 196-205)
**目的**: 会話履歴から主要トピックを抽出

```python
topic_prompt = f"""以下の会話履歴から、主要なトピックを抽出してください。

会話履歴:
{conversation_history}

以下のJSON形式で、3-5個の主要トピックを返してください：
{{
    "topics": ["トピック1", "トピック2", "トピック3"]
}}

営業スキルや業務に関連するトピックを優先してください。"""
```

### 4. backend/app/services/mock_llm.py

このファイルは実際のプロンプトではなく、テスト用のモックレスポンステンプレートを含んでいます。

## プロンプト設計の特徴

### 共通特徴
1. **日本語対応**: すべてのプロンプトが日本語の営業環境に最適化
2. **JSON形式**: 構造化された回答を求める設計
3. **段階的アプローチ**: 情報収集→分析→アクション計画の流れ
4. **実践的焦点**: 実行可能で測定可能な成果を重視

### プロンプトの役割分担
- **分析系**: テキスト分析、情報評価、トピック抽出
- **対話系**: 質問生成、フォローアップ、会話管理
- **計画系**: アクションプラン作成、目標設定

### 技術的考慮事項
- システムプロンプトとユーザープロンプトの分離
- 会話履歴の効果的な活用
- レスポンス形式の標準化（JSON）
- エラーハンドリングとフォールバック対応

## 使用上の注意点

1. **API キー管理**: OpenAI/Anthropic APIキーの適切な管理が必要
2. **モックモード**: `USE_MOCK_LLM=true`でテスト可能
3. **文字数制限**: LLMの入力制限を考慮した設計
4. **レスポンス検証**: JSON形式の妥当性チェックが重要

## 今後の改善点

1. プロンプトのバージョン管理
2. A/Bテストによる効果測定
3. 多言語対応の拡張
4. ユーザーフィードバックに基づく最適化